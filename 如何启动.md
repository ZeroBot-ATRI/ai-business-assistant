# AI业务助手 - 启动指南

## 推荐方式：手动启动（最稳定）

### 步骤 1：打开第一个终端 - 后端API

1. 按 `Win + R`，输入 `cmd`，回车
2. 切换到项目目录：
   ```batch
   cd /d c:\Users\litu1\Downloads\files
   ```
3. 启动后端API：
   ```batch
   python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
   ```
4. 看到 `Uvicorn running on http://0.0.0.0:8000` 表示成功

### 步骤 2：打开第二个终端 - 聊天界面

1. 再次按 `Win + R`，输入 `cmd`，回车
2. 切换到项目目录：
   ```batch
   cd /d c:\Users\litu1\Downloads\files
   ```
3. 启动聊天界面：
   ```batch
   python -m streamlit run ui/app_enhanced.py --server.port 8501
   ```
4. 看到 `Local URL: http://localhost:8501` 表示成功
5. 浏览器会自动打开界面

### 步骤 3：打开第三个终端 - 监控看板

1. 再次按 `Win + R`，输入 `cmd`，回车
2. 切换到项目目录：
   ```batch
   cd /d c:\Users\litu1\Downloads\files
   ```
3. 启动监控看板：
   ```batch
   python -m streamlit run ui/dashboard.py --server.port 8502
   ```
4. 看到 `Local URL: http://localhost:8502` 表示成功

## 访问地址

启动成功后，在浏览器中访问：

- **后端API文档**：http://localhost:8000/docs
- **聊天界面**：http://localhost:8501
- **监控看板**：http://localhost:8502

## 方式二：使用批处理脚本（需要测试）

### 方式 2.1：start.bat（推荐尝试）

双击运行 `start.bat`，它会：
- 打开3个CMD窗口，每个运行一个服务
- 可以看到每个服务的日志输出
- 关闭窗口即停止对应服务

### 方式 2.2：start_services.bat（后台运行）

双击运行 `start_services.bat`，它会：
- 所有服务在后台运行
- 不打开额外窗口
- 需要通过任务管理器停止服务

## 停止服务

### 方法1：关闭终端窗口
直接关闭对应的CMD窗口即可停止服务

### 方法2：使用 Ctrl+C
在服务运行的CMD窗口中按 `Ctrl+C`，然后按 `Y` 确认

### 方法3：停止所有Python进程
打开CMD，运行：
```batch
taskkill /F /IM python.exe
```
**警告**：这会停止所有正在运行的Python程序！

## 常见问题

### Q: 提示"模块未找到"错误
**A:** 需要安装依赖：
```batch
pip install -r requirements.txt
```

### Q: 端口被占用
**A:** 停止占用端口的进程或更改端口：
```batch
# 查看端口占用
netstat -ano | findstr "8000"
netstat -ano | findstr "8501"
netstat -ano | findstr "8502"

# 停止占用的进程（PID是最后一列数字）
taskkill /F /PID <进程ID>
```

### Q: 批处理脚本不工作
**A:** 使用上面的**手动启动方式**（最可靠）

### Q: CLAUDE_API_KEY错误
**A:** 确保 `.env` 文件存在且包含有效的API密钥：
```
CLAUDE_API_KEY=sk-ant-xxx...
```

## 快速测试

启动所有服务后，在浏览器中：

1. 访问 http://localhost:8000 - 应该看到JSON响应
2. 访问 http://localhost:8000/docs - 应该看到API文档界面
3. 访问 http://localhost:8501 - 应该看到聊天界面
4. 访问 http://localhost:8502 - 应该看到监控看板

## 推荐工作流

1. 启动服务（使用手动方式）
2. 打开浏览器访问聊天界面 (8501)
3. 在聊天界面测试功能
4. 如需查看数据，访问监控看板 (8502)
5. 开发时可访问API文档 (8000/docs)

## Windows Terminal 用户

如果你使用 Windows Terminal，可以：

1. 打开 Windows Terminal
2. 按 `Ctrl+Shift+T` 打开新标签页（共打开3个）
3. 在每个标签页中运行一个服务
4. 可以快速切换标签页查看日志

**优点**：所有服务在一个窗口中，方便管理！
